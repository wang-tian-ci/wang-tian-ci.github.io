<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>校园风光 — 王天赐</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
            --Teal:#0ea5a4;
            --Teal-Soft:#a7f3f0;
            --Sky:#dff6ff;
            --card: rgba(255,255,255,0.85);
            --text:#042028;
        }
        *{box-sizing:border-box}
        html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;color:var(--text);background:linear-gradient(180deg,#e6fbff,#eaf6ff)}
        body{overflow:hidden}

        /* 顶层容器 */
        .stage{position:relative;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;padding:6vh 6vw}

        /* 页面主标题（带玻璃背景与入场动画，颜色调深） */
        .page-title{position:fixed;top:22px;left:50%;transform:translateX(-50%);z-index:120;font-size:20px;color:#0b6b73;font-weight:700;background:rgba(255,255,255,0.06);backdrop-filter:blur(6px);padding:8px 14px;border-radius:10px;opacity:0;transform-origin:center;transform:translateX(-50%) translateY(-8px);transition:opacity .6s ease,transform .6s cubic-bezier(.2,.9,.2,1)}
        .page-title.enter{opacity:1;transform:translateX(-50%) translateY(0)}

        /* 背景模糊放大层（使用当前图片） */
        .bg-blur{position:absolute;inset:0;background-size:cover;background-position:center;filter:blur(12px) saturate(120%);transform:scale(1.05);transition:opacity .9s ease,transform 6s ease;opacity:0}
        .bg-blur.active{opacity:1;transform:scale(1.12)}

        /* 轻微移动的彩色光斑，点缀页面 */
        .glow{position:absolute;pointer-events:none;mix-blend-mode:screen;filter:blur(60px);opacity:0.35}
        .glow.one{width:360px;height:360px;background:radial-gradient(circle at 30% 30%, rgba(14,165,164,0.38), transparent 30%);left:6%;top:8%}
        .glow.two{width:420px;height:420px;background:radial-gradient(circle at 70% 70%, rgba(167,243,240,0.32), transparent 30%);right:6%;bottom:6%}

        /* 相册卡片 */
        .card{position:relative;z-index:30;background:var(--card);width:78%;max-width:1200px;height:72%;border-radius:18px;display:flex;overflow:hidden;box-shadow:0 30px 80px rgba(3,22,25,0.18)}

        /* 左侧主视图 */
        .viewer{flex:1;position:relative;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.06),transparent)}
        .slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .9s ease;}
        .slide.active{opacity:1}
        .slide img{max-width:100%;max-height:100%;object-fit:contain;border-radius:10px;box-shadow:0 18px 60px rgba(2,8,20,0.25);transform-origin:center;animation:floatZoom 6s ease-in-out infinite}
        @keyframes floatZoom{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

        /* 右侧说明栏 */
        .aside{width:320px;padding:28px 26px;background:linear-gradient(180deg,rgba(255,255,255,0.7),rgba(235,250,255,0.7));display:flex;flex-direction:column;gap:10px}
        .aside h2{margin:0;font-size:20px;color:var(--Teal);font-weight:700}
        .aside p{margin:0;color:#094046;opacity:0.95;line-height:1.6}
        .aside .meta{margin-top:auto;font-size:13px;color:#06656a;opacity:0.85}

        /* 底部缩略条 */
        .thumbs{position:absolute;left:50%;transform:translateX(-50%);bottom:18px;display:flex;gap:12px;z-index:40;overflow-x:auto;padding:6px}
        .thumbs button{width:72px;height:48px;border-radius:8px;border:2px solid rgba(255,255,255,0.6);overflow:hidden;background:transparent;cursor:pointer;padding:0;flex:0 0 auto}
        .thumbs img{width:100%;height:100%;object-fit:cover;display:block;filter:brightness(0.92)}
        .thumbs button.active{outline:3px solid rgba(14,165,164,0.14)}

        /* 播放/暂停 控件 */
        .controls{position:absolute;right:22px;bottom:22px;z-index:45;display:flex;gap:8px}
        .controls button{background:linear-gradient(90deg,#ffffff,#f2ffff);border:0;padding:8px 12px;border-radius:10px;box-shadow:0 10px 30px rgba(2,8,20,0.12);cursor:pointer;font-weight:600;color:var(--text);display:inline-flex;align-items:center;gap:8px;transition:transform .18s ease,box-shadow .18s ease}
        .controls button svg{width:18px;height:18px;display:block}
        .controls button.playing{transform:scale(1.03);box-shadow:0 14px 40px rgba(3,30,30,0.12)}

        /* SVG 按钮渐变动画（控制 stop 的颜色变化） */
        @keyframes gradShiftA{0%{stop-color:#06b6a4}50%{stop-color:#06a2d1}100%{stop-color:#06b6a4}}
        @keyframes gradShiftB{0%{stop-color:#7ee7e0}50%{stop-color:#a7f3f0}100%{stop-color:#7ee7e0}}
        svg .g1{animation:gradShiftA 3s linear infinite}
        svg .g2{animation:gradShiftB 3s linear infinite}
        .controls button:active{transform:translateY(1px)}

        /* 左上角白球导航 */
        .nav-circle-wrap{position:fixed;top:18px;left:18px;z-index:110}
        .nav-circle{width:56px;height:56px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 30px rgba(2,8,20,0.18);cursor:pointer;border:0;font-weight:700;color:var(--text);font-size:14px}
        .nav-menu{position:absolute;top:70px;left:0;min-width:200px;background:#fff;border-radius:10px;padding:8px 6px;box-shadow:0 12px 40px rgba(2,8,20,0.15);opacity:0;transform:translateY(-8px) scale(.96);pointer-events:none;transition:opacity .18s ease,transform .18s cubic-bezier(.2,.9,.2,1)}
        /* 触屏友好：点击展开（.open）或键盘 focus-within 展开；增加缩放与渐显 */
        .nav-circle-wrap.open .nav-menu,.nav-circle-wrap:focus-within .nav-menu{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}
        .nav-circle-wrap.open .nav-circle{transform:scale(1.06);transition:transform .18s ease}
        .nav-menu a{display:block;padding:10px 12px;color:var(--text);text-decoration:none;border-radius:6px}
        .nav-menu a:hover{background:rgba(14,165,164,0.06);color:var(--Teal)}

        /* 装饰：飘动小叶子（简易） */
        .leaf{position:absolute;width:18px;height:18px;background:linear-gradient(180deg,#a7f3f0,#7fe0db);border-radius:50%;opacity:0.9;filter:blur(6px);animation:leafMove 8s linear infinite}
        .leaf.l1{left:8%;top:30%;animation-delay:0s}
        .leaf.l2{left:22%;top:60%;animation-delay:1.6s}
        .leaf.l3{right:14%;top:42%;animation-delay:2.8s}
        @keyframes leafMove{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-40px) rotate(45deg)}100%{transform:translateY(0) rotate(0)}}

        /* 响应式 */
        @media (max-width:900px){
            .card{flex-direction:column;height:80%;width:92%}
            .aside{width:100%;order:2}
            .viewer{order:1;height:58%}
            .thumbs{bottom:90px}
        }
    </style>
</head>
<body>

    <!-- SVG defs for button gradient (hidden) -->
    <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
        <defs>
            <linearGradient id="btnGrad" x1="0%" x2="100%">
                <stop class="g1" offset="0%" stop-color="#06b6a4"></stop>
                <stop class="g2" offset="100%" stop-color="#7ee7e0"></stop>
            </linearGradient>
        </defs>
    </svg>

    <div class="nav-circle-wrap">
        <button class="nav-circle" aria-haspopup="true">导航</button>
        <nav class="nav-menu" aria-label="主导航">
            <a href="index.html">目录</a>
            <a href="introduction.html">自我介绍</a>
            <a href="hobby.html">兴趣爱好</a>
            <a href="picture.html">校园风光</a>
            <a href="contact.html">联系方式</a>
        </nav>
    </div>

    <div class="stage">
        <div class="glow one"></div>
        <div class="glow two"></div>

        <h1 class="page-title">校园风光</h1>

        <div class="card" role="region" aria-label="校园相册">
            <div class="viewer" id="viewer">
                <!-- 背景模糊层（动态注入） -->
                <div id="bgContainer"></div>
                <!-- 幻灯片容器 -->
            </div>
            <aside class="aside" id="aside">
                <h2 id="title">校园全景</h2>
                <p id="desc">这里展示校园的风光与记忆。图片会在三秒内自动切换，并且背景有模糊放大的动画效果，让画面更生动。</p>
                <div class="meta">摄影：本人</div>
            </aside>

            <div class="thumbs" id="thumbs" aria-hidden="false"></div>

            <div class="controls" aria-hidden="false">
                <button id="playPause" aria-pressed="false" title="播放/暂停">
                    <!-- 默认显示暂停图标（会根据状态切换） -->
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <rect x="6" y="5" width="4" height="14" fill="#023036" rx="1"/>
                        <rect x="14" y="5" width="4" height="14" fill="#023036" rx="1"/>
                    </svg>
                    <span class="sr-only">暂停</span>
                </button>
            </div>

            <div class="leaf l1"></div>
            <div class="leaf l2"></div>
            <div class="leaf l3"></div>
        </div>
    </div>

    <script>
        // 图片列表（已移除指定的 4 张图片，只在相册中删除，不在磁盘上删除文件）
        const slides = [
            {src:'image/overview.jpg', title:'校园全景', desc:'航拍视角下的校园全景，红叶与建筑交织成温暖的校园画布。'},
            {src:'image/School History Exhibition Hall1.jpg', title:'夕阳下的校史陈列馆', desc:'夕阳照在校史陈列馆外墙，散发出温暖的金色光芒。'},
            {src:'image/School History Exhibition Hall2.jpg', title:'陈列馆侧影', desc:'玻璃与石墙交错，折射出历史匆匆的足迹。'},
            {src:'image/School History Exhibition Hall3.jpg', title:'银杏树', desc:'秋日里金黄的银杏树映衬着华科的现代建筑。'},
            {src:'image/School History Exhibition Hall4.jpg', title:'校史陈列馆夜景', desc:'夜幕下的陈列馆与路灯交织成安静的风景。'},
            {src:'image/Yujia Mountain.jpg', title:'喻家山的宁静', desc:'喻家山步道，晨雾中有静谧与鸟鸣。'},
            {src:'image/maple.jpg', title:'枫叶大道', desc:'秋日里漫步在枫叶铺就的小径，脚步被染成暖色。'},
            {src:'image/left-fifth.jpg', title:'教学楼一角', desc:'教学楼阳台的光影与学生留下的背影痕迹。'},
            {src:'image/right-ninth.jpg', title:'湖畔小径', desc:'湖边的长廊与倒影，是午后散步的好去处。'},
            {src:'image/National Optoelectronics Research Center.jpg', title:'光电研究中心', desc:'现代化的科研大楼，在阳光下闪烁着科技的光彩。'},
        ];

        // 构建 DOM
        const viewer = document.getElementById('viewer');
        const bgContainer = document.getElementById('bgContainer');
        const thumbs = document.getElementById('thumbs');
        const titleEl = document.getElementById('title');
        const descEl = document.getElementById('desc');

        slides.forEach((s, i)=>{
            const slide = document.createElement('div');
            slide.className = 'slide';
            slide.dataset.index = i;
            const img = document.createElement('img');
            img.src = s.src; img.alt = s.title;
            slide.appendChild(img);
            viewer.appendChild(slide);

            // 背景层
            const bg = document.createElement('div');
            bg.className = 'bg-blur';
            bg.style.backgroundImage = `url(${s.src})`;
            bg.dataset.index = i;
            bgContainer.appendChild(bg);

            // 缩略图
            const tb = document.createElement('button');
            tb.innerHTML = `<img src="${s.src}" alt="${s.title}">`;
            tb.dataset.index = i;
            tb.addEventListener('click', ()=>showSlide(i,true));
            thumbs.appendChild(tb);
        });

        const slideEls = document.querySelectorAll('.slide');
        const bgEls = document.querySelectorAll('.bg-blur');
        const thumbBtns = thumbs.querySelectorAll('button');

        let idx = 0; let timer = null; let playing = true;
        const PLAY_SVG = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M8 5v14l11-7z" fill="#023036"/></svg>';
        const PAUSE_SVG = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="6" y="5" width="4" height="14" fill="#023036" rx="1"/><rect x="14" y="5" width="4" height="14" fill="#023036" rx="1"/></svg>';
        function setActive(i){
            slideEls.forEach(s=>s.classList.toggle('active', Number(s.dataset.index)===i));
            bgEls.forEach(b=>b.classList.toggle('active', Number(b.dataset.index)===i));
            thumbBtns.forEach(t=>t.classList.toggle('active', Number(t.dataset.index)===i));
            titleEl.textContent = slides[i].title;
            descEl.textContent = slides[i].desc;
        }

        function showSlide(i,manual){
            idx = i;
            setActive(idx);
            if(manual){resetTimer();}
        }

        function next(){
            idx = (idx+1) % slides.length;
            setActive(idx);
        }

        function startTimer(){ clearInterval(timer); timer = setInterval(next,3000); playing = true; updatePlayPause(); }
        function stopTimer(){ clearInterval(timer); playing = false; updatePlayPause(); }
        function resetTimer(){ startTimer(); }

        // 更新播放/暂停按钮文本与 aria 状态
        function updatePlayPause(){
            const btn = document.getElementById('playPause');
            if(!btn) return;
            if(playing){ btn.classList.add('playing'); btn.innerHTML = PAUSE_SVG.replace(/fill=\"#023036\"/g,'fill="url(#btnGrad)"') + '<span class="sr-only">暂停</span>'; }
            else{ btn.classList.remove('playing'); btn.innerHTML = PLAY_SVG.replace(/fill=\"#023036\"/g,'fill="url(#btnGrad)"') + '<span class="sr-only">播放</span>'; }
            btn.setAttribute('aria-pressed', (!playing).toString());
        }

        // 初始显示
        setActive(0);
        startTimer();

        // 标题入场动画
        document.addEventListener('DOMContentLoaded', ()=>{
            const t = document.querySelector('.page-title');
            if(t) requestAnimationFrame(()=>t.classList.add('enter'));
        });

        // 播放/暂停按钮逻辑
        const playPauseBtn = document.getElementById('playPause');
        if(playPauseBtn){
            playPauseBtn.addEventListener('click', (e)=>{
                e.stopPropagation();
                if(playing){ stopTimer(); } else { startTimer(); }
            });
        }

        // 改为：鼠标点击大图切换播放/暂停（鼠标悬停不再暂停）
        viewer.addEventListener('click', (e)=>{
            e.stopPropagation();
            if(playing){ stopTimer(); } else { startTimer(); }
        });

        // 轻微键盘支持：左右切换
        window.addEventListener('keydown', (e)=>{
            if(e.key === 'ArrowRight'){ next(); resetTimer(); }
            if(e.key === 'ArrowLeft'){ idx = (idx-1+slides.length)%slides.length; setActive(idx); resetTimer(); }
        });

        // accessibility: ensure bgContainer children exist
        // 把 bgContainer 的子元素放到 viewer 背后（通过 CSS 顺序即可）
        // 小优化：预加载图片
        slides.forEach(s=>{ const im=new Image(); im.src=s.src; });

        // 点击缩略图跳转到对应大图并暂停自动播放；同时添加可访问性与键盘支持
        thumbBtns.forEach(tb=>{
            const i = Number(tb.dataset.index);
            tb.setAttribute('type', 'button');
            tb.setAttribute('aria-label', '查看 ' + (slides[i] && slides[i].title ? slides[i].title : ('图片 ' + i)));
            tb.addEventListener('click', (e)=>{
                e.preventDefault();
                showSlide(i, true);
                stopTimer();
            });
            tb.addEventListener('keydown', (e)=>{
                if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); showSlide(i, true); resetTimer(); }
            });
        });

        // 缩略图拖拽支持（横向拖动滚动）
        (function enableThumbDrag(){
            if(!thumbs) return;
            let isDown = false; let startX=0; let startScroll=0;
            thumbs.style.cursor = 'grab';
            thumbs.addEventListener('pointerdown', (e)=>{
                isDown = true; thumbs.setPointerCapture(e.pointerId);
                startX = e.clientX; startScroll = thumbs.scrollLeft; thumbs.style.cursor = 'grabbing';
            });
            thumbs.addEventListener('pointermove', (e)=>{
                if(!isDown) return;
                const dx = e.clientX - startX;
                thumbs.scrollLeft = startScroll - dx;
            });
            const up = (e)=>{ isDown = false; try{ thumbs.releasePointerCapture && thumbs.releasePointerCapture(e.pointerId); }catch(err){} thumbs.style.cursor='grab'; };
            thumbs.addEventListener('pointerup', up); thumbs.addEventListener('pointercancel', up); thumbs.addEventListener('pointerleave', up);
        })();

        // 导航点击展开（触屏友好） & 点击空白处关闭
        const navWrap = document.querySelector('.nav-circle-wrap');
        const navBtn = navWrap ? navWrap.querySelector('.nav-circle') : null;
        if(navBtn && navWrap){
            navBtn.addEventListener('click', (e)=>{ e.stopPropagation(); navWrap.classList.toggle('open'); navWrap.classList.contains('open') ? navBtn.setAttribute('aria-expanded','true') : navBtn.setAttribute('aria-expanded','false'); });
            // 点击页面任意处关闭导航菜单
            document.addEventListener('click', (ev)=>{ if(!navWrap.contains(ev.target)){ navWrap.classList.remove('open'); navBtn && navBtn.setAttribute('aria-expanded','false'); } });
        }

        // --- 触屏手势支持（左右滑动切换） ---
        let touchStartX = 0, touchStartY = 0, touchEndX = 0, touchEndY = 0;
        const SWIPE_MIN_DISTANCE = 40; // px
        viewer.addEventListener('touchstart', (e)=>{
            if(e.touches && e.touches.length===1){
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                touchEndX = touchStartX; touchEndY = touchStartY;
            }
        }, {passive:true});
        viewer.addEventListener('touchmove', (e)=>{
            if(e.touches && e.touches.length===1){
                touchEndX = e.touches[0].clientX;
                touchEndY = e.touches[0].clientY;
            }
        }, {passive:true});
        viewer.addEventListener('touchend', (e)=>{
            const dx = touchEndX - touchStartX;
            const dy = touchEndY - touchStartY;
            if(Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > SWIPE_MIN_DISTANCE){
                if(dx < 0){ // left swipe -> next
                    next(); stopTimer();
                } else { // right swipe -> prev
                    idx = (idx-1+slides.length)%slides.length; setActive(idx); stopTimer();
                }
            }
        });

        // 清理末尾重复的 HTML 块（若存在，保持文件内纯净）
    </script>
</body>
</html>